---
language: go
sudo: false
notifications:
  email: joaosoft@gmail.com
jobs:
  include:
    - stage: tester
      install:
        - go get -u github.com/golang/dep/cmd/dep
        - dep ensure
      os: linux
      go: master
      script:
        - go build .
        - go tester .
        - go tester -coverprofile=coverage.txt -covermode=atomic .
        - go tester . -bench=. -cpu=1,2,4,8

      after_success:
        - bash <(curl -s https://codecov.io/bash)